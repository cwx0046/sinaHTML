<!DOCTYPE html>
<html>
<head>
<meta charset="GB2312">
<meta http-equiv="cache-control" content="no-cache"/>
<meta name="format-detection" content="telephone=no"/>
<meta name="apple-mobile-web-app-capable" content="yes" />
<meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0">
<title>红牛羽林争霸</title>
<meta name="keywords" content="红牛羽林争霸" />
<meta name="description" content="红牛羽林争霸" />
<script type="text/javascript" src="http://jiangsu.sinaimg.cn/js/jquery_1.11.2.min_jsonp.js"></script>
<link rel="stylesheet" href="http://jiangsu.sinaimg.cn/js/idangerous.swiper.css">
<script src="http://jiangsu.sinaimg.cn/js/idangerous.swiper.min.js"></script>
<script src="http://jiangsu.sinaimg.cn/js/jquery.transit.min.js"></script>
<style type="text/css">
body, ul, ol, li, p, h1, h2, h3, h4, h5, h6, table, td, th, form, fieldset, img, dl, dt, dd { margin:0; padding:0; }
textarea, input, select, body { font-size:12px; }
select, input { vertical-align:middle; }
fieldset, img { border:0; }
ul, ol { list-style:none; }
img { border:0; }
a { text-decoration:none; color:#000; }
a:hover { color:#ffa10d; }
.fl { float:left; display:inline; }
.fr { float:right; display:inline; }
.cb { clear:both; display:block; height:0px; overflow:hidden; width:100%; }
.clearfix:after { clear:both; content:""; display:block; height:0; }
</style>
<!-- 自适应缩放css -->
<style type="text/css">
a, img, div { -webkit-tap-highlight-color: transparent; }
body { overflow-x: hidden; background-color: #000; }
.swiper-container { width: 640px; height: 1008px; -webkit-transform-origin: top left; margin: 0; background-color: #fefcef; }
.swiper-wrapper * { -webkit-backface-visibility: hidden; } /* 避免ip4Safari闪动 */
.page-provider { position:absolute; top:0; text-align: center; width: 100%; font-size: 24px; line-height: 80px; color: #e5d2d4; }
.page-provider#page-provider-bottom { top:auto; bottom: 0; }
.swiper-slide { width: 640px; height: 1008px; position: relative; overflow: hidden; }
</style>
<style type="text/css">
#s1 { background:url("http://jiangsu.sinaimg.cn/zt/s/hnqccy/hnqccy/images/1.jpg") no-repeat center top; }
#s2 { background:url("http://jiangsu.sinaimg.cn/zt/s/hnqccy/hnqccy/images/3.jpg") no-repeat center top; }
#s3 { background:url("http://jiangsu.sinaimg.cn/zt/s/hnqccy/hnqccy/images/2.jpg") no-repeat center top; }
.game-start, .game-win, .game-lose, .game-rank { width:436px; height:562px; margin:316px auto 0; text-align:center; }
.game-result { color:#FFF; font-size:20px; padding-top:70px; line-height:35px; }
.scon-umber { background-color:#44413b; width:324px; height:110px; margin:10px auto 0; display: -webkit-box; -webkit-box-orient: horizontal; -webkit-box-pack: center; -webkit-box-align: center; }
.scon-umber span { display:inline-block; width:78px; height:99px; margin:0 1px; background:url("http://jiangsu.sinaimg.cn/zt/s/hnqccy/hnqccy/images/game-score.png") no-repeat 0 0; color:#FFF; line-height:100px; font-size:80px; }
.scon-umber span.curr { background-position:-79px 0 }
.red { color:#F00; font-size:22px; }
.game-congTxt { color:#ffff00; line-height:50px; font-size:20px; }
.game-rank h3 { color:#ffff00; font-size:36px; line-height: 70px; }
.game-rank table { color:#fff; font-size:20px; line-height:30px; }
.rank-cong { width:345px; height:345px; overflow:auto; margin:0 auto; }
.rank-btn a { display:inline-block; width:128px; text-align:center; color:#ffff00; font-size:20px; line-height:30px; border-radius:5px; border:1px solid #ff0; margin:20px 5px 0; }
.game-timefor { background-color:rgba(0, 0, 0, 0.8); width:100%; height:100%; position:absolute; top:0; text-align:center; color:#FFF; z-index:999;}
.timefor-suig { font-size:40px; line-height:130px; padding-top:50px; }
.timeSet { font-size:90px; }
#t-phone{ width:320px; height:30px; font-size:18px; background-color:#e5e5e5;}

/* Bottom Arrow */
.btnBottom{ position:absolute; top: 2%; text-align:center; width: 100%;color: #bfbfbf;text-shadow: 0 1px 0px #000;-webkit-animation-name:btnBottom;-webkit-animation-duration:1.8s;-webkit-animation-timing-function:linear;-webkit-animation-delay:0s;-webkit-animation-iteration-count:infinite;-webkit-animation-direction:normal;-webkit-animation-play-state:running; font-size:18px;}
@-webkit-keyframes btnBottom /* Safari and Chrome */
{
0% {-webkit-transform:translateY(0px); opacity: 0;}
90% { opacity: 1;}
100% {-webkit-transform:translateY(-15px); opacity: 0;}
}

.jiangsuForm{ display: none; position: absolute; left: 0; top: 287px; } 
</style>
</head>
<body ontouchmove="event.preventDefault()">

<img src="http://jiangsu.sinaimg.cn/2015/0331/U11392P1194DT20150331033629.jpg" style=" position:absolute; top:-400px;">
<!-- 阻止ios浏览器整页上下滑动 --> 
<!-- 
	* 说明：
	* 多页面滑动模板，适用于 类ppt 页面
	* 页面 640x1008 按宽度缩放
	* 使用 idangerous.swiper 插件切换页面 ，参数请在下方 【Initialize swiper】中自行更改
	 --> 
<script>
<!--
var time_set=0; //摇动总数
var time_int = 6; //倒计时
var locksti = false;
var mySwiper;

$(function()
{
	getTop10();
	$("#gameStart").click(function()
	{
 		$(".game-timefor").show();
		star();	
	})
	$("#sub-phone").click(function()
	{
		var tel = $("#t-phone").val();
		var partten = /^1[3,5,7,8]\d{9}$/;	
		if(!partten.test(tel)){alert("请填写正确的手机号！"); return false;}	
		$.JSONP('http://act.city.sina.com.cn/interface/activity/json_add_signup.php',{
			    act_id:10713,
			    custom_1:tel,
			    custom_2:time_set
		    },function(bm){
	        if(bm.error==0){
				alert("提交成功！");
				$("#t-phone").val("");
				getTop10();
	        	showStart();
	        }else{
	            alert(bm.errmsg);
	        }	
		})
	})
})

function star()
{
	timing();
	init();
}

function showStart()
{
	$(".t-Box").hide();
	$(".game-start").show();
	time_set=0; //摇动总数
	time_int = 6; //倒计时
	locksti = false;	
}

function showAns(timeSet)
{
	var selfRank = getSelfRank(timeSet);
	//alert(selfRank);
	//console.log(selfRank); 
	if(selfRank <= 25){
		var s_tercet = timeSet+"";
		var arrStercet = s_tercet.split("");
		$(".scon-umber span").html("0").removeClass("curr");
		$(".t-Box").hide();
		$(".game-win").show();
		$(".s-result").html(timeSet);
		$(".s-rank").html(selfRank);
		for (var i=0;i<arrStercet.length;i++)
		{
			$(".game-win .scon-umber span").eq(4-arrStercet.length+i).html(arrStercet[i]).addClass("curr");	
		}
	}else
	{
		var s_tercet = timeSet+"";
		var arrStercet = s_tercet.split("");
		$(".scon-umber span").html("0").removeClass("curr");
		$(".t-Box").hide();
		$(".game-lose").show();	
		$(".s-result").html(timeSet);
		$(".s-rank").html(selfRank);
		for (var i=0;i<arrStercet.length;i++)
		{
			$(".game-lose .scon-umber span").eq(4-arrStercet.length+i).html(arrStercet[i]).addClass("curr");	
		}
	}
}

function timing()
{
	time_int--;
	$("#m_timeSet").html(time_int);
	if(time_int==0)
	{
		showAns(time_set);
		locksti = true;
		return false;
	}
	setTimeout(timing,1000);
}

var SHAKE_THRESHOLD = 3000;
var last_update = 0;
var x = y = z = last_x = last_y = last_z = 0;
function init() {
	if (window.DeviceMotionEvent){
		window.addEventListener('devicemotion', deviceMotionHandler, false);
	} else {
		alert('not support mobile event');
	}}
function deviceMotionHandler(eventData) {
	var acceleration = eventData.accelerationIncludingGravity;
	var curTime = new Date().getTime();
	if ((curTime - last_update) > 10) {
		var diffTime = curTime - last_update;
		last_update = curTime;
		x = acceleration.x;
		y = acceleration.y;
		z = acceleration.z;
		var speed = Math.abs(x + y + z - last_x - last_y - last_z) / diffTime * 10000;

		if (speed > SHAKE_THRESHOLD) {
			if (!locksti) {yaoyiyao();}
		}
		last_x = x;
		last_y = y;
		last_z = z;
	}} 
function yaoyiyao(){
	time_set++;
	//document.getElementById("numberSet").innerHTML = time_set;
	}
	
//显示排行
function showRank(){
		$(".t-Box").hide();
		$(".game-rank").show();	
	}

//获取前25
var data_Top10 = [];
function getTop10( callback ) {
	var Top10List = $(".rank-cong");
	var html = "";

	$.JSONP('http://act.city.sina.com.cn/interface/activity/json_get_user_works.php',{act_id:10713,pcount:9999},function(json){
		for(var i=0; i<json.count; i++){
			var phone = json.data[i].form_data.custom_1.value;
			phone = phone.substr(0,3) + "****" + phone.substr(7,4);
			var score = parseInt(json.data[i].form_data.custom_2.value);
			data_Top10[i] = [phone, score];
		}
		
	    var len = data_Top10.length; 
	    var tmp = [];
	    for(var i = 0; i<len; i++){
	        for(var j=len-1; j>i; j--){
	            if(data_Top10[j][1] > data_Top10[j-1][1]){
	                tmp = data_Top10[j-1];
	                data_Top10[j-1] = data_Top10[j];
	                data_Top10[j] = tmp;
	            }
	        }
	    }
		html += '<table width="340" border="0">';
		html += '<tr>';
		html += '<th scope="col">名次</th>';
		html += '<th scope="col">手机号</th>';
		html += '<th scope="col">能量值</th>';
		html += '</tr>';
		
	    for (var i = 0; i < 25; i++) {
	    	if (data_Top10[i]==null | data_Top10[i] == undefined) {
				continue;
			}
	    	var no = i + 1;
	    	no = (no<=9) ? ("0" + no) : no;
			html += '<tr>';
			html += '<td>'+ no +'</td>';
			html += '<td>'+ data_Top10[i][0] +'</td>';
			html += '<td>'+ data_Top10[i][1] +'</td>';
			html += '</tr>';
		}
		html += '</table>';
		Top10List.html(html);
		if(typeof(callback) == 'function'){
			callback.call();
		}
	});
}	

function getSelfRank(obj)
{
	if(obj<data_Top10[data_Top10.length-1][1])
	{
		return data_Top10.length+1;
	}else{
		for (var i = 0; i < data_Top10.length; i++) 
		{
			if (obj >= data_Top10[i][1]) 
			{
				return i+1;
				return false;
			}
		}
	}
}



-->
</script>
<div class="swiper-container"> 
  <!-- 版权声明 -->
  <div class="page-provider" id="page-provider-top">新浪江苏 SINA 2015</div>
  <div class="page-provider" id="page-provider-bottom">新浪江苏 SINA 2015</div>
  <div class="swiper-wrapper"> 
  
      <div class="swiper-slide swiper-no-swiping" id="s1">
    <img src="http://jiangsu.sinaimg.cn/2015/0402/U12547P1194DT20150402111448.jpg" border="0" usemap="#Map3" />
<map name="Map3">
    <area shape="rect" coords="217,594,425,652" href="http://ylzb.redbullsports.cn">
    <area shape="rect" coords="218,677,426,735" href="javascript:void(0);" onclick="mySwiper.swipeTo(1)">
    <area shape="rect" coords="216,760,424,818" href="javascript:;" onclick="mySwiper.swipeTo(2)">
	<area shape="poly" coords="0,386,99,485,0,584" href="javascript:void(0);" ontouchstart="jiangsuFormShow();" />
</map>
	<img alt="江苏地区联系表" class="jiangsuForm" src="http://jiangsu.sinaimg.cn/2015/0402/U12547P1194DT20150402111930.png" ontouchstart="jiangsuFormHide();">
	<script type="text/javascript">
	function jiangsuFormShow() {
		$(".jiangsuForm").css({x: '-640px', opacity: 0, display: "block"}).transition({x: '0px', opacity: 1},800,"cubic-bezier(.12,.56,.34,.98)");
	}
	function jiangsuFormHide() {
		$(".jiangsuForm").css({x: '0px', opacity: 1}).transition({x: '-640px', opacity: 0},400,"cubic-bezier(.56,.12,.89,.34)");
	}
	</script>
    </div>
    <!--First Slide-->
    <div class="swiper-slide" id="s2">
      <div class="t-Box game-start"> <img style="margin-top:20px;" src="http://jiangsu.sinaimg.cn/zt/s/hnqccy/hnqccy/images/game-star-1.png" border="0" usemap="#Map" />
        <map name="Map">
          <area id="gameStart" shape="rect" coords="70,320,242,369" href="javascript:void(0);">
          <area shape="rect" coords="68,390,240,439" href="javascript:showRank();">
        </map>
      </div>
      <div class="t-Box game-lose" style="display:none">
        <h3 class="game-result">您的能量指数为<span class="s-result red">xxx</span>，目前排名第<span class="s-rank red">x</span>名<br>
          没有发挥好？立刻来罐红牛激发潜能吧！</h3>
        <div class="scon-umber"><span>0</span><span>0</span><span>0</span><span>0</span></div>
        <img style=" margin-top:20px;" src="http://jiangsu.sinaimg.cn/zt/s/hnqccy/hnqccy/images/game-lose-1.png" border="0" usemap="#Map2" />
        <map name="Map2">
          <area shape="rect" coords="32,7,239,66" href="javascript:showStart();">
          <area shape="rect" coords="32,84,239,143" href="javascript:showRank();">
        </map>
      </div>
      <div class="t-Box game-win" style="display:none">
        <h3 class="game-result">您的能量指数为<span class="s-result red">xxx</span>，目前排名第<span class="s-rank red">x</span>名<br>
        </h3>
        <div class="game-congTxt">恭喜您暂时挥入前25名！</div>
        <div class="scon-umber"><span>0</span><span>0</span><span>0</span><span>0</span></div>
        <div><input id="t-phone" name="" type="text" placeholder="请输入手机号，若有获奖以备联系.."></div>
        <img id="sub-phone" style=" margin-top:20px;" src="http://jiangsu.sinaimg.cn/zt/s/hnqccy/hnqccy/images/game-win-1.png" /> </div>
      <div class="t-Box game-rank" style="display:none">
        <h3>排行榜</h3>
        <div class="rank-cong" ontouchmove="event.stopPropagation()">
          
        </div>
        <div class="rank-btn" style="color:#fff;font-size:16px; line-height:40px;"><a href="javascript:showStart();">返回</a><br/>
点击右上角分享到朋友圈
</div>
      </div>
      <div class="t-Box game-timefor" style="display:none">
        <div class="timefor-suig">快速摇动手机</div>
        <div id="m_timeSet" class="timeSet">5</div>
      </div>
      
      <div class="btnBottom"><img src="http://s3img.city.sina.com.cn/activity/common/large/3678b273dddd9f4bbd1396dd69ce009d.png" width="28" ><br/>向上滑动</div>
    </div>

    
    <!--Second Slide--> 
    <div class="swiper-slide" id="s3">
        <style>
					#scrollPic_cont_34{-webkit-transform:rotate(-5deg)}
                    .mask{width:100%;position:absolute;bottom:0px;}
                    .mask-bg{background-color:#000;opacity:.618;filter:alpha(opacity=61.8);position:absolute;width:100%;height:100%;left:0;z-index:2;}
                    .mask-c{position:absolute;height:100%;width:100%;z-index:10; padding-left:20px;color:#fff;}
                    .mask-c a, .mask-c a:hover,.video a:hover{color:#fff;text-decoration:none;}
                    .scroll-pic-w{width:450px; margin:260px auto 0;position:relative;}
                    .scroll-pic{height:570px;overflow:hidden;position:relative;}
                    .scroll-pic-i{display:inline;float:left;width:450px;height:570px;position:relative;overflow:hidden;}
                    .scroll-pic-i img{display:block;width:450px;height:570px;}
                    .scroll-pic-i .mask{height:33px;line-height:33px;font-size:14px;}
                    .scroll-nav{position:absolute;width:38px;height:38px;top:75px;}
                    .scroll-nav a{display:block;height:100%;text-indent:-9999em;overflow:hidden;opacity:.61;filter:alpha(opacity=61);}
                    .scroll-nav a:hover{opacity:0.81;filter:alpha(opacity=81);}
                    .scroll-nav-prev{left:-50px;}
                    .scroll-nav-prev a{background:url(http://jiangsu.sinaimg.cn/2015/0331/U11392P1194DT20150331102538.png) no-repeat;}
                    .scroll-nav-next{right:-50px;}
                    .scroll-nav-next a{background:url(http://jiangsu.sinaimg.cn/2015/0331/U11392P1194DT20150331102538_1.png) no-repeat;}
                    .scroll-page{  bottom: -20px; height: 15px; line-height: 10px; margin-right: 10px; margin-bottom:5px; padding-top: 5px;  position: absolute; right: 0; text-align: right; z-index: 999;}
                    .scroll-page span{display:inline-block;overflow:hidden;width:10px;height:10px;background:url(http://s3img.city.sina.com.cn/activity/common/large/fd99e9851afdc2c6cf23bd9639d6b75d.png) no-repeat;cursor:pointer;margin-left:5px;}
                    .scroll-page .dotItemOn{background-position:-20px 0px;}
                    .new_focus{width:450px;}
                    .new_focus .scroll-pic{height:570px;overflow:hidden;position:relative;}
                    .new_focus .scroll-pic-i{display:inline;float:left;width:450px;height:570px;position:relative;overflow:hidden;}
                    .new_focus .scroll-pic-i img{display:block;width:450px;height:570px;}
                    .new_focus .scroll-nav{position:absolute;width:36px;height:81px;top:260px;}
                    </style>
		<script src="http://jiangsu.sinaimg.cn/zt/s/js/scrollPic.js" type="text/javascript"></script>
        <div class="scroll-pic-w new_focus">
            <div class="scroll-pic" id="scrollPic_cont_34">
                    <div class="scroll-pic-i">
                        <div class="img"><img class="newsFocus_link" src="http://jiangsu.sinaimg.cn/2015/0331/U11392P1194DT20150331103016.jpg"></div>
                        <div class="mask">
                        <!--div class="mask-bg"></div>
                        <div class="mask-c"></div-->
                        </div>
                    </div>
                    <div class="scroll-pic-i">
                        <div class="img"><img class="newsFocus_link" src="http://jiangsu.sinaimg.cn/2015/0331/U11392P1194DT20150331103017.jpg"></div>
                        <div class="mask">
                        <!--div class="mask-bg"></div>
                        <div class="mask-c"></div-->
                        </div>
                    </div>
                    <div class="scroll-pic-i">
                        <div class="img"><img class="newsFocus_link" src="http://jiangsu.sinaimg.cn/2015/0331/U11392P1194DT20150331103018_1.jpg"></div>
                        <div class="mask">
                        <!--div class="mask-bg"></div>
                        <div class="mask-c"></div-->
                        </div>
                    </div>
                    <div class="scroll-pic-i">
                        <div class="img"><img class="newsFocus_link" src="http://jiangsu.sinaimg.cn/2015/0331/U11392P1194DT20150331103018.jpg"></div>
                        <div class="mask">
                        <!--div class="mask-bg"></div>
                        <div class="mask-c"></div-->
                        </div>
                    </div>
<div class="scroll-pic-i">
                        <div class="img"><img class="newsFocus_link" src="http://jiangsu.sinaimg.cn/2015/0331/U11392P1194DT20150331103016_1.jpg"></div>
                        <div class="mask">
                        <!--div class="mask-bg"></div>
                        <div class="mask-c"></div-->
                        </div>
                    </div>
 
            </div>
            <div class="scroll-nav scroll-nav-prev"><a href="javascript:;" id="scrollPicPrev_cont_34">Prev</a></div>
            <div class="scroll-nav scroll-nav-next"><a href="javascript:;" id="scrollPicNext_cont_34">Next</a></div>
            <div class="scroll-page" id="scrollPicPage_cont_34"></div>
        </div>
        <script type="text/javascript">
        (function(){
           var scrollPic = new ScrollPic();
                scrollPic.scrollContId = 'scrollPic_cont_34';
                scrollPic.arrLeftId = 'scrollPicPrev_cont_34';
                scrollPic.arrRightId = 'scrollPicNext_cont_34';
                scrollPic.dotListId = 'scrollPicPage_cont_34';
                scrollPic.pageWidth = 450;
                scrollPic.frameWidth = 450;
                scrollPic.upright = false;
                scrollPic.circularly = true;
                scrollPic.autoPlay = true;
                scrollPic.speed = 5;
                scrollPic.initialize();
        })();
        </script>
        </div>
    <!--Third Slide-->
    
    <!--Etc..--> 
  </div>
</div>
</body>

<!-- Initialize swiper -->
<script type="text/javascript">
	window.onload = function() {
		mySwiper = new Swiper('.swiper-container',{
			// options
			mode:'vertical', //vertical //horizontal
			mousewheelControl: true, //鼠标滚轮控制
			keyboardControl: true,   // 键盘控制
			onSlideChangeEnd : Swipercallback,
			onSlideChangeStart : slideChangeCallback,
			noSwiping: true
		});  
	}
	
	/* SlideChangeEndCallback */
	function Swipercallback(p){
	    var act = p.activeIndex; //slideEndIndex
	    // todo sth...
	}
	function slideChangeCallback(p) {
		if(p.previousIndex == 2 && p.activeIndex == 1){
			mySwiper.swipeTo(0);
		}
	}
</script>

<!-- page Auto scale -->
<script type="text/javascript">
	$(function() {
		pageAutoScale();
	});
	$(window).resize(function() {
		pageAutoScale();
	});
	
	function pageAutoScale(){
		var r = document.body.offsetWidth / 640;
		$(".swiper-container").css("-webkit-transform", "scale(" + r + ")");
		$("body").height( window.innerHeight ); //修正整数页面高度
		
		$(".swiper-slider").css("height",parseInt(window.innerHeight / r) );  
		$(".swiper-container").css("height",parseInt(window.innerHeight / r) );  
		if (window.innerHeight<=1008*r) {  //当用户显示区域小于1008高度时，调整每页高度。
			// $(".btnBottom").css("top",(window.innerHeight / r - parseInt($(".btnBottom").css("bottom")) ) );  //下滑动提示箭头位置始终距底
		}
	}
</script>
</html>