<!DOCTYPE html>
<html>
<head>
<meta charset="GB18030">
<meta http-equiv="cache-control" content="no-cache"/>
<meta name="format-detection" content="telephone=no"/>
<meta name="apple-mobile-web-app-capable" content="yes" />
<meta name="viewport" content="width=device-width, user-scalable=no">
<title>工商银行融e购</title>
<meta name="keywords" content="工商银行,融e购" />
<meta name="description" content="工商银行融e购" />
<meta name="author" content="NorthWind" />
<link rel="stylesheet" href="http://jiangsu.sinaimg.cn/zt/s/css/reset.css">
<script type="text/javascript" src="http://jiangsu.sinaimg.cn/js/jquery_1.11.2.min_jsonp.js"></script>
<link rel="stylesheet" href="http://jiangsu.sinaimg.cn/js/swiper.min.css">
<script src="http://jiangsu.sinaimg.cn/js/swiper.jquery.min.3.0.6.js"></script>
<script type="text/javascript" src="http://jiangsu.sinaimg.cn/js/artTemplate.js"></script>
<!-- 
<script src="http://jiangsu.sinaimg.cn/js/jquery1.11.1.min.js"></script>
<script src="http://jiangsu.sinaimg.cn/js/jquery.transit.min.js"></script>
 -->
<!-- 自适应缩放css -->
<style type="text/css">
body{ overflow-x: hidden; background-color: #000;
 background-image: url("http://jiangsu.sinaimg.cn/zt/s/gsyhjregh5/images/bg.png");
 background-size: cover;
  max-width: 640px;  margin: 0 auto;
  font-family: "Microsoft Yahei";
  font-size: 14px;
  color: #FFF;
   }
.page{ padding: 1em; }

input[type="button"]{ outline:none; -webkit-appearance:none; border: none; cursor: pointer; border-radius: 3px; font-size: 12px; font-weight: bold; padding: 6px 0; font-family: "Microsoft Yahei"; }
.btn{ display: block; margin: 0 auto; width: 100px; color: #f72530; background-color: #FFF; }

.swiper-slide{ text-align: justify; width: 100%; }
.card{ background-color:#FFF;border-radius: 3px;  text-align: center; background-clip: padding-box; height: 190px; width: 48%; display: inline-block;   vertical-align: top;  position: relative; box-shadow: 0 4px 9px -2px rgba(0, 0, 0, 0.49);} 
.card_wrap{ padding:1em; }
.justify_fix{display:inline-block; width:100%; height:0; overflow:hidden;}
.c_photo{ height: 90px; }
.c_text{ color: #d63b3f; font-size: 12px; padding: 12px 0; }
.c_btn{ color: #FFF; background-color: #f72530; width: 100%; }
.c_orgPriceWrap{  text-decoration: line-through; color: #f7252f; }
.c_orgPrice{ font-size: 12px; color: #9f9f9f; }
.c_orgPrice:BEFORE{ content: "原价：06 " }
.c_curPrice{ font-size: 13px; color: #f72530; font-weight: bold; }
.c_curPrice:BEFORE{ content: "现价：06 " }

.swiper-container{ height: 200px; margin-bottom: 0.4em; }

#target2 .card.true:AFTER, #target2 .card.false:AFTER{ content: ""; display: block; border-radius: 3px;  height: inherit;  width: 100%;  position: absolute;  top: 0;  left: 0; background: RGBA(0,0,0,0.6) url("http://jiangsu.sinaimg.cn/zt/s/gsyhjregh5/images/right.png") no-repeat center;}
#target2 .card.true:AFTER{ }
#target2 .card.false:AFTER{ background-image: url("http://jiangsu.sinaimg.cn/zt/s/gsyhjregh5/images/wrong.png"); }

#p2 .title{ text-align: center;  font-size: 1.2em;  padding: 1.6em 0;  font-weight: bold; }
#target2 .swiper-slide{ height: 210px; }
</style>
</head>
<body>
<img alt="ico" style="position:absolute; top: -400px;" src="http://jiangsu.sinaimg.cn/zt/s/gsyhjregh5/images/ico.png">
<div id="p1" class="page">
	<div>
		<img alt="" src="http://jiangsu.sinaimg.cn/zt/s/gsyhjregh5/images/logo.png" width="87">
	</div>
	<div>
		<img alt="" src="http://jiangsu.sinaimg.cn/zt/s/gsyhjregh5/images/e1.png" style="width: 100%; display: block; margin-bottom: 1em;">
	</div>
	<div>
		<!-- swiper -->
		<div class="swiper-container">
		    <div class="swiper-wrapper" id="target1">
<script type="text/html" id="targetTemplate1">
{{each items as item index}}
	{{if index % 2 == 0}}
		<div class="swiper-slide swiper-no-swiping">
		        	<div class="card">
		        		<div class="card_wrap">
			        		<img class="c_photo" src="{{item.imgsrc}}">
			        		<div class="c_text">{{item.name}}</div>
			        		<input type="button" class="c_btn btn" value="它比较贵" onclick="clickItem({{index}})">
		        		</div>
		        	</div>
	{{else}}
					<div class="card">
		        		<div class="card_wrap">
			        		<img class="c_photo" src="{{item.imgsrc}}">
			        		<div class="c_text">{{item.name}}</div>
			        		<input type="button" class="c_btn btn" value="它比较贵" onclick="clickItem({{index}})">
		        		</div>
		        	</div>
		        	<span class="justify_fix"></span>
		        </div>
	{{/if}}
{{/each}}
</script>
		    </div>
		</div>
		<!-- end swiper -->
	</div>
	<div>
		<input type="button" value="换一组" onclick="clickItem()" class="btn">
	</div>
</div>
<div id="p2" class="page">
	<div>
		<img alt="" src="http://jiangsu.sinaimg.cn/zt/s/gsyhjregh5/images/logo.png" width="87">
	</div>
	<div>
		<div class="title">您一共猜了<span id="num_total"></span>组，猜错<span id="num_wrong"></span>组</div>
	</div>
	<div id="target2">
		
<script type="text/html" id="targetTemplate2">
{{each items as item index}}
	{{if index % 2 == 0}}
		<div class="swiper-slide">
		        	<div class="card">
		        		<div class="card_wrap">
			        		<img class="c_photo" src="{{item.imgsrc}}">
			        		<div class="c_text">{{item.name}}</div>
							<div class="c_orgPriceWrap"><div class="c_orgPrice">{{item.orgPrice}}</div></div>
							<div class="c_curPrice">{{item.curPrice}}</div>
		        		</div>
		        	</div>
	{{else}}
					<div class="card">
		        		<div class="card_wrap">
			        		<img class="c_photo" src="{{item.imgsrc}}">
			        		<div class="c_text">{{item.name}}</div>
							<div class="c_orgPriceWrap"><div class="c_orgPrice">{{item.orgPrice}}</div></div>
							<div class="c_curPrice">{{item.curPrice}}</div>
		        		</div>
		        	</div>
		        	<span class="justify_fix"></span>
		        </div>
	{{/if}}
{{/each}}
</script>
		
		
	</div>
	<div>
		<input type="button" value="确定" class="btn" id="showWeixin"/>
	</div>
</div>



<!-- 弹出页 -->
<style>
.weixinCover{   display: none;     position: fixed; top: 0; left: 0; width: 100%; height: 100%; color:#FFF; background-color: RGBA(0,0,0,0.9); -webkit-transform: translateZ(0); -moz-transform: translateZ(0); -ms-transform: translateZ(0); transform: translateZ(0);   z-index: 1;}
.weixinCover .continer{ background-image:url("http://jiangsu.sinaimg.cn/zt/s/gsyhjregh5/images/3.png"); background-size:320px; position: absolute;top: 0;right: 0;bottom: 0;left: 0;margin: auto;width:320px; height: 410px; }
.weixinCover .continer .text{ font-size: 12px;text-align: center; }
#phone{ outline:none; -webkit-appearance:none; border: none;    margin-top: 87px;  width: 120px;  font-size: 13px;}
.weixinCover .continer .text input[type="button"]{ outline:none; -webkit-appearance:none; border: none; width: 108px; height: 26px; cursor: pointer; background: none; }
</style>
<div class="weixinCover">
	<div class="continer">
		<div class="text">
			<a href="http://mall.icbc.com.cn/" target="_blank" style="position: absolute; top: 23px; left: 110px; width: 64px; height: 24px; " onclick="event.stopPropagation();"></a>
			<div>
				<input id="phone" placeholder="轻击输入" maxlength="11" onclick="event.stopPropagation();"/>
			</div>
			<div style="margin-top: 19px;">
				<input type="button" id="submit"/>
			</div>
			<div style="margin-top: 9px;">
				<input type="button" id="again" onclick="reset()"/>
			</div>
		</div>
	</div>
</div>
		
<script type="text/javascript">
var isSubmitted = false;
$("#submit").click(function(e){
	//提交手机号
	if (isSubmitted) {
		alert("您已进行了提交");
		return;
	}
	
	var data1 = {};
	data1.act_id = 10963;
	data1.custom_1 = $("#phone").val(); 
	var partten = /^1[3,4,5,7,8]\d{9}$/;
	if(!partten.test(data1.custom_1)){alert("请填写正确的手机号！"); return false;}
	
	isSubmitted = true;
	$.JSONP('http://act.city.sina.com.cn/interface/activity/json_add_signup.php',data1,function(bm){
        if(bm.error==0){
            alert("提交成功!");
        }else{
            alert(bm.errmsg);
        }
    }); 
	
	e.stopPropagation();  //阻止冒泡
});

/* 例：点击显示弹出层 */
$("#showWeixin").bind("click",function(){
	$(".weixinCover").fadeIn(600,function(){
		$(".weixinCover").click(function(){
			 $(this).unbind("click").fadeOut();
		});
	});
});
</script>





<script type="text/javascript">
var mySwiper;
window.onload = function() {
	/* Initialize swiper */
	mySwiper = new Swiper('.swiper-container',{
		direction:'vertical', //vertical //horizontal
		noSwiping: true
	});  
}
</script>

<script type="text/javascript">
var data = {
		desc: "产品数据",
		items: [
		        {
		        	imgsrc: "http://jiangsu.sinaimg.cn/zt/s/gsyhjregh5/images/photo/0.jpg",
		        	name: "华为智能手机",
		        	orgPrice: 2880,
		        	curPrice: 1880,
		        },{
		        	imgsrc: "http://jiangsu.sinaimg.cn/zt/s/gsyhjregh5/images/photo/1.jpg",
		        	name: "德龙胶囊咖啡机",
		        	orgPrice: 2090,
		        	curPrice: 2090,
		        },{
		        	imgsrc: "http://jiangsu.sinaimg.cn/zt/s/gsyhjregh5/images/photo/2.jpg",
		        	name: "澳柯玛电风扇",
		        	orgPrice: 270,
		        	curPrice: 99,
		        },{
		        	imgsrc: "http://jiangsu.sinaimg.cn/zt/s/gsyhjregh5/images/photo/3.jpg",
		        	name: "真空保温杯",
		        	orgPrice: 298,
		        	curPrice: 297,
		        },{
		        	imgsrc: "http://jiangsu.sinaimg.cn/zt/s/gsyhjregh5/images/photo/4.jpg",
		        	name: "华为手机套",
		        	orgPrice: 158,
		        	curPrice: 88,
		        },{
		        	imgsrc: "http://jiangsu.sinaimg.cn/zt/s/gsyhjregh5/images/photo/5.jpg",
		        	name: "艺术手机壳",
		        	orgPrice: 128,
		        	curPrice: 100,
		        },{
		        	imgsrc: "http://jiangsu.sinaimg.cn/zt/s/gsyhjregh5/images/photo/6.jpg",
		        	name: "蚕丝枕",
		        	orgPrice: 918,
		        	curPrice: 199,
		        },{
		        	imgsrc: "http://jiangsu.sinaimg.cn/zt/s/gsyhjregh5/images/photo/7.jpg",
		        	name: "酸枝木手柄",
		        	orgPrice: 280,
		        	curPrice: 259,
		        },{
		        	imgsrc: "http://jiangsu.sinaimg.cn/zt/s/gsyhjregh5/images/photo/8.jpg",
		        	name: "玛瑙手串珠",
		        	orgPrice: 136,
		        	curPrice: 1,
		        },{
		        	imgsrc: "http://jiangsu.sinaimg.cn/zt/s/gsyhjregh5/images/photo/9.jpg",
		        	name: "OTS时尚电子表",
		        	orgPrice: 218,
		        	curPrice: 138,
		        },{
		        	imgsrc: "http://jiangsu.sinaimg.cn/zt/s/gsyhjregh5/images/photo/10.jpg",
		        	name: "多功能音箱",
		        	orgPrice: 168,
		        	curPrice: 79,
		        },{
		        	imgsrc: "http://jiangsu.sinaimg.cn/zt/s/gsyhjregh5/images/photo/11.jpg",
		        	name: "小米移动电源",
		        	orgPrice: 169,
		        	curPrice: 129,
		        },{
		        	imgsrc: "http://jiangsu.sinaimg.cn/zt/s/gsyhjregh5/images/photo/12.jpg",
		        	name: "蘑菇球爆米花",
		        	orgPrice: 26,
		        	curPrice: 9.9,
		        },{
		        	imgsrc: "http://jiangsu.sinaimg.cn/zt/s/gsyhjregh5/images/photo/13.jpg",
		        	name: "美式球爆米花",
		        	orgPrice: 58,
		        	curPrice: 23.8,
		        },{
		        	imgsrc: "http://jiangsu.sinaimg.cn/zt/s/gsyhjregh5/images/photo/14.jpg",
		        	name: "家韵音响",
		        	orgPrice: 2999,
		        	curPrice: 1699,
		        },{
		        	imgsrc: "http://jiangsu.sinaimg.cn/zt/s/gsyhjregh5/images/photo/15.jpg",
		        	name: "松下智能电饭煲",
		        	orgPrice: 2380,
		        	curPrice: 1799,
		        }
		        ],
	};


var html = template('targetTemplate1', data);
document.getElementById('target1').innerHTML = html;
var html = template('targetTemplate2', data);
document.getElementById('target2').innerHTML = html;

</script>
<script type="text/javascript">
var userAnswer = [];

function reset() {
	pageSwitch(0);
	userAnswer = [];
	mySwiper.slideTo(0,0);
	$(".card").removeClass("true").removeClass("false");
}

function pageSwitch(num) {
	$('body').stop(true,true).animate({scrollTop:0},600);
	$(".page:not(#p"+(num+1)+")").hide();
	$("#p"+(num+1)).show();
}

function clickItem(index){
	//答案计算
	if (index != undefined) {
		userAnswer.push(checkItem(index));
	}else{
		
	}
	
	//滑倒下一页
	if (mySwiper.isEnd) {
			console.log("答题完毕，回滚顶部");
		mySwiper.slideTo(0,0);
		showAnswer();
		pageSwitch(1);
	}else{
		mySwiper.slideNext();
	}
}

//将结果渲染到页面
function showAnswer(){
	for (var i = 0; i < userAnswer.length; i++) {
		var item  = userAnswer[i];
		var index = item[0];
		var isRight = item[1];
		
		//页面上找到第index个卡片，为其打上isRightWrap遮罩
		$("#target2 .card").eq(index).addClass(isRight.toString());
	}
	
	$("#num_total").text(getNum_total());
	$("#num_wrong").text(getNum_wrong());
	
}


/**
 * 
 * @ return index 点击目标
 *          isRight √ / ×
 */
function checkItem(index){
	//首先获取要比较的俩个值
	var itemClick = data.items[index];
	var itemCompare = {};
	if (index % 2 == 0) {
		itemCompare = data.items[index+1];
	}else{
		itemCompare = data.items[index-1];
	}
	
	//比较俩个价格
	if (itemClick.curPrice > itemCompare.curPrice) {
		console.log("作答 "+index+"," +"正确");
		return [index, true];
	} else {
		console.log("作答 "+index+"," +"错误");
		return [index, false];
	}
}

function getCompareList(index) {
	var list = [];
	if (index % 2 == 0) {
		var i1 = data.items[index];
		var i2 = data.items[index+1];
		list.push(i1, i2);
	}else{
		var i1 = data.items[index-1];
		var i2 = data.items[index];
		list.push(i1, i2);
	}
	return list;
}


function getNum_total(){
	return userAnswer.length;
}

function getNum_wrong() {
	var count = 0;
	for (var i = 0; i < userAnswer.length; i++) {
		if (userAnswer[i][1]) {
			
		}else{
			count++;
		}
	}
	return count;
}
</script>
<script type="text/javascript">
pageSwitch(0);
</script>
</body>
</html>
